//Minified :))))))))))))))))))))))))))))))))))))
!function (K, y) { "function" == typeof define && define.amd ? define(["exports"], y) : "object" == typeof exports && "string" != typeof exports.nodeName ? y(exports) : y(K.commonJsStrict = {}) }(this, function (K) {
	function y(a) { if (a in S) return a; for (var b = a[0].toUpperCase() + a.slice(1), c = T.length; c--;)if ((a = T[c] + b) in S) return a } function z(a, b) { a = a || {}; for (var c in b) b[c] && b[c].constructor && b[c].constructor === Object ? (a[c] = a[c] || {}, z(a[c], b[c])) : a[c] = b[c]; return a } function L(a) {
		if ("createEvent" in document) {
			var b = document.createEvent("HTMLEvents");
b.initEvent("change",!1,!0);a.dispatchEvent(b)}else a.fireEvent("onchange")}function k(a,b,c){if("string"==typeof b){var d=b;(b={})[d]=c}for(var e in b)a.style[e]=b[e]}function q(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function U(a,b){for(var c in b)a.setAttribute(c,b[c])}function V(a,b){var c=a.naturalWidth,d=a.naturalHeight,e=b||M(a);e&&5<=e&&(e=c,c=d,d=e);return{width:c,height:d}}function M(a){return a.exifdata?a.exifdata.Orientation:1}function N(a,b,c){var d=b.width,e=b.height,
f=a.getContext("2d");switch(a.width=b.width,a.height=b.height,f.save(),c){case 2:f.translate(d,0);f.scale(-1,1);break;case 3:f.translate(d,e);f.rotate(180*Math.PI/180);break;case 4:f.translate(0,e);f.scale(1,-1);break;case 5:a.width=e;a.height=d;f.rotate(90*Math.PI/180);f.scale(1,-1);break;case 6:a.width=e;a.height=d;f.rotate(90*Math.PI/180);f.translate(0,-e);break;case 7:a.width=e;a.height=d;f.rotate(-90*Math.PI/180);f.translate(-d,e);f.scale(1,-1);break;case 8:a.width=e,a.height=d,f.translate(0,
d),f.rotate(-90*Math.PI/180)}f.drawImage(b,0,0,d,e);f.restore()}function ba(){var a=this.options.viewport.type?"cr-vp-"+this.options.viewport.type:null;this.options.useCanvas=this.options.enableOrientation||this.options.enableExif&&window.EXIF;this.data={};this.elements={};var b=this.elements.boundary=document.createElement("div");var c=this.elements.viewport=document.createElement("div");this.elements.img=document.createElement("img");var d=this.elements.overlay=document.createElement("div");this.options.useCanvas?
(this.elements.canvas=document.createElement("canvas"),this.elements.preview=this.elements.canvas):this.elements.preview=this.elements.img;q(b,"cr-boundary");b.setAttribute("aria-dropeffect","none");var e=this.options.boundary.width;var f=this.options.boundary.height;k(b,{width:e+(isNaN(e)?"":"px"),height:f+(isNaN(f)?"":"px")});q(c,"cr-viewport");a&&q(c,a);k(c,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"});c.setAttribute("tabindex",0);q(this.elements.preview,"cr-image");
U(this.elements.preview,{alt:"preview","aria-grabbed":"false"});q(d,"cr-overlay");this.element.appendChild(b);b.appendChild(this.elements.preview);b.appendChild(c);b.appendChild(d);q(this.element,"breakercrop-container");this.options.customClass&&q(this.element,this.options.customClass);(function(){function a(a,b){var c=g.elements.preview.getBoundingClientRect(),d=p.y+b,n=p.x+a;g.options.enforceBoundary?(m.top>c.top+b&&m.bottom<c.bottom+b&&(p.y=d),m.left>c.left+a&&m.right<c.right+a&&(p.x=n)):(p.y=
d,p.x=n)}function b(a){g.elements.preview.setAttribute("aria-grabbed",a);g.elements.boundary.setAttribute("aria-dropeffect",a?"move":"none")}function c(a){if((void 0===a.button||0===a.button)&&(a.preventDefault(),!v)){if(v=!0,n=a.pageX,f=a.pageY,a.touches)a=a.touches[0],n=a.pageX,f=a.pageY;b(v);p=h.parse(g.elements.preview);window.addEventListener("mousemove",d);window.addEventListener("touchmove",d);window.addEventListener("mouseup",e);window.addEventListener("touchend",e);document.body.style[C]=
"none";m=g.elements.viewport.getBoundingClientRect()}}function d(b){b.preventDefault();var c=b.pageX,d=b.pageY;b.touches&&(d=b.touches[0],c=d.pageX,d=d.pageY);var e=c-n,l=d-f,m={};if("touchmove"===b.type&&1<b.touches.length)return c=b.touches[0],b=b.touches[1],b=Math.sqrt((c.pageX-b.pageX)*(c.pageX-b.pageX)+(c.pageY-b.pageY)*(c.pageY-b.pageY)),t||(t=b/g._currentZoom),D.call(g,b/t),void L(g.elements.zoomer);a(e,l);m[r]=p.toString();k(g.elements.preview,m);G.call(g);f=d;n=c}function e(){b(v=!1);window.removeEventListener("mousemove",
d);window.removeEventListener("touchmove",d);window.removeEventListener("mouseup",e);window.removeEventListener("touchend",e);document.body.style[C]="";J.call(g);E.call(g);t=0}var n,f,t,m,p,g=this,v=!1;g.elements.overlay.addEventListener("mousedown",c);g.elements.viewport.addEventListener("keydown",function(b){if(!b.shiftKey||38!==b.keyCode&&40!==b.keyCode)g.options.enableKeyMovement&&37<=b.keyCode&&40>=b.keyCode&&(b.preventDefault(),b=function(a){switch(a){case 37:return[1,0];case 38:return[0,1];
case 39:return[-1,0];case 40:return[0,-1]}}(b.keyCode),p=h.parse(g.elements.preview),document.body.style[C]="none",m=g.elements.viewport.getBoundingClientRect(),function(b){var c={};a(b[0],b[1]);c[r]=p.toString();k(g.elements.preview,c);G.call(g);document.body.style[C]="";J.call(g);E.call(g);t=0}(b));else{var c=0;c=38===b.keyCode?parseFloat(g.elements.zoomer.value,10)+parseFloat(g.elements.zoomer.step,10):parseFloat(g.elements.zoomer.value,10)-parseFloat(g.elements.zoomer.step,10);g.setZoom(c)}});
g.elements.overlay.addEventListener("touchstart",c)}).call(this);this.options.enableZoom&&function(){function a(){W.call(c,{value:parseFloat(e.value),origin:new H(c.elements.preview),viewportRect:c.elements.viewport.getBoundingClientRect(),transform:h.parse(c.elements.preview)})}function b(b){if("ctrl"===c.options.mouseWheelZoom&&!0!==b.ctrlKey)return 0;var d=c._currentZoom+(b.wheelDelta?b.wheelDelta/1200:b.deltaY?b.deltaY/1060:b.detail?b.detail/-60:0)*c._currentZoom;b.preventDefault();D.call(c,d);
a.call(c)}var c=this,d=c.elements.zoomerWrap=document.createElement("div"),e=c.elements.zoomer=document.createElement("input");q(d,"cr-slider-wrap");q(e,"cr-slider");e.type="range";e.step="0.0001";e.value=1;e.style.display=c.options.showZoomer?"":"none";e.setAttribute("aria-label","zoom");c.element.appendChild(d);d.appendChild(e);c._currentZoom=1;c.elements.zoomer.addEventListener("input",a);c.elements.zoomer.addEventListener("change",a);c.options.mouseWheelZoom&&(c.elements.boundary.addEventListener("mousewheel",
b),c.elements.boundary.addEventListener("DOMMouseScroll",b))}.call(this);this.options.enableResize&&function(){function a(a){if((void 0===a.button||0===a.button)&&(a.preventDefault(),!h)){var n=g.elements.overlay.getBoundingClientRect();if(h=!0,e=a.pageX,f=a.pageY,d=-1!==a.currentTarget.className.indexOf("vertical")?"v":"h",u=n.width,t=n.height,a.touches)a=a.touches[0],e=a.pageX,f=a.pageY;window.addEventListener("mousemove",b);window.addEventListener("touchmove",b);window.addEventListener("mouseup",
c);window.addEventListener("touchend",c);document.body.style[C]="none"}}function b(a){var b=a.pageX,c=a.pageY;if(a.preventDefault(),a.touches)c=a.touches[0],b=c.pageX,c=c.pageY;a=b-e;var n=c-f,m=g.options.viewport.height+n,l=g.options.viewport.width+a;"v"===d&&50<=m&&m<=t?(k(v,{height:m+"px"}),g.options.boundary.height+=n,k(g.elements.boundary,{height:g.options.boundary.height+"px"}),g.options.viewport.height+=n,k(g.elements.viewport,{height:g.options.viewport.height+"px"})):"h"===d&&50<=l&&l<=u&&
(k(v,{width:l+"px"}),g.options.boundary.width+=a,k(g.elements.boundary,{width:g.options.boundary.width+"px"}),g.options.viewport.width+=a,k(g.elements.viewport,{width:g.options.viewport.width+"px"}));G.call(g);O.call(g);J.call(g);E.call(g);f=c;e=b}function c(){h=!1;window.removeEventListener("mousemove",b);window.removeEventListener("touchmove",b);window.removeEventListener("mouseup",c);window.removeEventListener("touchend",c);document.body.style[C]=""}var d,e,f,u,t,m,p,g=this,v=document.createElement("div"),
h=!1;q(v,"cr-resizer");k(v,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"});this.options.resizeControls.height&&(q(m=document.createElement("div"),"cr-resizer-vertical"),v.appendChild(m));this.options.resizeControls.width&&(q(p=document.createElement("div"),"cr-resizer-horisontal"),v.appendChild(p));m&&(m.addEventListener("mousedown",a),m.addEventListener("touchstart",a));p&&(p.addEventListener("mousedown",a),p.addEventListener("touchstart",a));this.elements.boundary.appendChild(v)}.call(this)}
function D(a){if(this.options.enableZoom){var b=this.elements.zoomer;a=A(a,4);b.value=Math.max(b.min,Math.min(b.max,a))}}function W(a){function b(){var a={};a[r]=d.toString();a[F]=f.toString();k(c.elements.preview,a)}var c=this,d=a?a.transform:h.parse(c.elements.preview),e=a?a.viewportRect:c.elements.viewport.getBoundingClientRect(),f=a?a.origin:new H(c.elements.preview);if(c._currentZoom=a?a.value:c._currentZoom,d.scale=c._currentZoom,c.elements.zoomer.setAttribute("aria-valuenow",c._currentZoom),
b(),c.options.enforceBoundary)e=function(a){var b=this._currentZoom,c=a.width;a=a.height;var d=this.elements.boundary.clientWidth/2,e=this.elements.boundary.clientHeight/2,f=this.elements.preview.getBoundingClientRect(),u=f.width;f=f.height;var t=c/2,m=a/2;d=-1*(t/b-d);e=-1*(m/b-e);t*=1/b;m*=1/b;return{translate:{maxX:d,minX:d-(1/b*u-1/b*c),maxY:e,minY:e-(1/b*f-1/b*a)},origin:{maxX:1/b*u-t,minX:t,maxY:1/b*f-m,minY:m}}}.call(c,e),a=e.translate,e=e.origin,d.x>=a.maxX&&(f.x=e.minX,d.x=a.maxX),d.x<=a.minX&&
(f.x=e.maxX,d.x=a.minX),d.y>=a.maxY&&(f.y=e.minY,d.y=a.maxY),d.y<=a.minY&&(f.y=e.maxY,d.y=a.minY);b();da.call(c);E.call(c)}function J(){var a=this._currentZoom,b=this.elements.preview.getBoundingClientRect(),c=this.elements.viewport.getBoundingClientRect(),d=h.parse(this.elements.preview.style[r]),e=new H(this.elements.preview),f=c.left-b.left+c.width/2;b=(c.top-b.top+c.height/2)/a;f/=a;c=(b-e.y)*(1-a);d.x-=(f-e.x)*(1-a);d.y-=c;a={};a[F]=f+"px "+b+"px";a[r]=d.toString();k(this.elements.preview,a)}
function G(){if(this.elements){var a=this.elements.boundary.getBoundingClientRect(),b=this.elements.preview.getBoundingClientRect();k(this.elements.overlay,{width:b.width+"px",height:b.height+"px",top:b.top-a.top+"px",left:b.left-a.left+"px"})}}function E(){var a,b=this.get();0<this.elements.preview.offsetHeight&&0<this.elements.preview.offsetWidth&&(this.options.update.call(this,b),this.$&&"undefined"==typeof Prototype?this.$(this.element).trigger("update.breakercrop",b):(window.CustomEvent?a=new CustomEvent("update",
{detail:b}):(a=document.createEvent("CustomEvent")).initCustomEvent("update",!0,!0,b),this.element.dispatchEvent(a)))}function P(){var a,b={},c=this.elements.preview,d=new h(0,0,1),e=new H;0<this.elements.preview.offsetHeight&&0<this.elements.preview.offsetWidth&&!this.data.bound&&(this.data.bound=!0,b[r]=d.toString(),b[F]=e.toString(),b.opacity=1,k(c,b),a=this.elements.preview.getBoundingClientRect(),this._originalImageWidth=a.width,this._originalImageHeight=a.height,this.data.orientation=M(this.elements.img),
this.options.enableZoom?O.call(this,!0):this._currentZoom=1,d.scale=this._currentZoom,b[r]=d.toString(),k(c,b),this.data.points.length?function(a){if(4!==a.length)throw"Breakercrop - Invalid number of points supplied: "+a;var b=a[2]-a[0],c=this.elements.viewport.getBoundingClientRect(),d=this.elements.boundary.getBoundingClientRect();b=c.width/b;var e=-1*a[1]+(c.top-d.top);c=-1*a[0]+(c.left-d.left);d={};d[F]=a[0]+"px "+a[1]+"px";d[r]=(new h(c,e,b)).toString();k(this.elements.preview,d);D.call(this,
b);this._currentZoom=b}.call(this,this.data.points):function(){var a=this.elements.preview.getBoundingClientRect(),b=this.elements.viewport.getBoundingClientRect(),c=this.elements.boundary.getBoundingClientRect();a=new h(b.left-c.left-(a.width-b.width)/2,b.top-c.top-(a.height-b.height)/2,this._currentZoom);k(this.elements.preview,r,a.toString())}.call(this),J.call(this),G.call(this))}function O(a){var b,c,d,e,f=0,h=this.options.maxZoom||1.5,l=this.elements.zoomer,k=parseFloat(l.value),x=this.elements.boundary.getBoundingClientRect(),
I=V(this.elements.img,this.data.orientation),n=this.elements.viewport.getBoundingClientRect();this.options.enforceBoundary&&(d=n.width/I.width,e=n.height/I.height,f=Math.max(d,e));f>=h&&(h=f+1);l.min=A(f,4);l.max=A(h,4);!a&&(k<l.min||k>l.max)?D.call(this,k<l.min?l.min:l.max):a&&(c=Math.max(x.width/I.width,x.height/I.height),b=null!==this.data.boundZoom?this.data.boundZoom:c,D.call(this,b));L(l)}function Q(a){var b=a.points,c=parseInt(b[0],10),d=parseInt(b[1],10),e=parseInt(b[2],10)-c;b=parseInt(b[3],
10)-d;var f=a.circle,h=document.createElement("canvas"),l=h.getContext("2d"),k=a.outputWidth||e,x=a.outputHeight||b;a.outputWidth&&a.outputHeight;return h.width=k,h.height=x,a.backgroundColor&&(l.fillStyle=a.backgroundColor,l.fillRect(0,0,k,x)),!1!==this.options.enforceBoundary&&(e=Math.min(e,this._originalImageWidth),b=Math.min(b,this._originalImageHeight)),l.drawImage(this.elements.preview,c,d,e,b,0,0,k,x),f&&(l.fillStyle="#fff",l.globalCompositeOperation="destination-in",l.beginPath(),l.arc(h.width/
2,h.height/2,h.width/2,0,2*Math.PI,!0),l.closePath(),l.fill()),h}function X(a,b){var c,d,e=this,f=[],h=null;var l=e.options.enableExif&&window.EXIF;if("string"==typeof a){var k=a;a={}}else if(Array.isArray(a))f=a.slice();else{if(void 0===a&&e.data.url)return P.call(e),E.call(e),null;k=a.url;f=a.points||[];h=void 0===a.zoom?null:a.zoom}return e.data.bound=!1,e.data.url=k||e.data.url,e.data.boundZoom=h,(c=k,d=new Image,d.style.opacity=0,new Promise(function(a){function b(){d.style.opacity=1;setTimeout(function(){a(d)},
1)}d.removeAttribute("crossOrigin");c.match(/^https?:\/\/|^\/\//)&&d.setAttribute("crossOrigin","anonymous");d.onload=function(){l?EXIF.getData(d,function(){b()}):b()};d.src=c})).then(function(c){if(function(a){this.elements.img.parentNode&&(Array.prototype.forEach.call(this.elements.img.classList,function(b){a.classList.add(b)}),this.elements.img.parentNode.replaceChild(a,this.elements.img),this.elements.preview=a);this.elements.img=a}.call(e,c),f.length)e.options.relative&&(f=[f[0]*c.naturalWidth/
100,f[1]*c.naturalHeight/100,f[2]*c.naturalWidth/100,f[3]*c.naturalHeight/100]);else{var d,n;c=V(c);var u=e.elements.viewport.getBoundingClientRect();u=u.width/u.height;c.width/c.height>u?d=(n=c.height)*u:(d=c.width,n=c.height/u);u=(c.width-d)/2;c=(c.height-n)/2;e.data.points=[u,c,u+d,c+n]}e.data.points=f.map(function(a){return parseFloat(a)});e.options.useCanvas&&function(a){var b=this.elements.canvas,c=this.elements.img,d=b.getContext("2d"),e=this.options.enableExif&&window.EXIF;a=this.options.enableOrientation&&
a;d.clearRect(0,0,b.width,b.height);b.width=c.width;b.height=c.height;e&&!a?N(b,c,parseInt(M(c)||0,10)):a&&N(b,c,a)}.call(e,a.orientation||1);P.call(e);E.call(e);b&&b()})["catch"](function(a){console.error("Breakercrop:"+a)})}function A(a,b){return parseFloat(a).toFixed(b||0)}function Y(){var a=this.elements.preview.getBoundingClientRect(),b=this.elements.viewport.getBoundingClientRect(),c=b.left-a.left;a=b.top-a.top;var d=c+this.elements.viewport.offsetWidth+(b.width-this.elements.viewport.offsetWidth)/
2;b=a+this.elements.viewport.offsetHeight+(b.height-this.elements.viewport.offsetHeight)/2;var e=this._currentZoom;(e===1/0||isNaN(e))&&(e=1);var f=this.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;return c=Math.max(f,c/e),a=Math.max(f,a/e),d=Math.max(f,d/e),b=Math.max(f,b/e),{points:[A(c),A(a),A(d),A(b)],zoom:e,orientation:this.data.orientation}}function ea(a){var b=this,c=Y.call(b),d=z(z({},fa),z({},a)),e="string"==typeof a?a:d.type||"base64";a=d.size||"viewport";var f=d.format,h=d.quality,
l=d.backgroundColor;d="boolean"==typeof d.circle?d.circle:"circle"===b.options.viewport.type;var r=b.elements.viewport.getBoundingClientRect(),x=r.width/r.height;return"viewport"===a?(c.outputWidth=r.width,c.outputHeight=r.height):"object"==typeof a&&(a.width&&a.height?(c.outputWidth=a.width,c.outputHeight=a.height):a.width?(c.outputWidth=a.width,c.outputHeight=a.width/x):a.height&&(c.outputWidth=a.height*x,c.outputHeight=a.height)),-1<ha.indexOf(f)&&(c.format="image/"+f,c.quality=h),c.circle=d,c.url=
b.data.url,c.backgroundColor=l,new Promise(function(a,d){switch(e.toLowerCase()){case "rawcanvas":a(Q.call(b,c));break;case "canvas":case "base64":a(function(a){return Q.call(this,a).toDataURL(a.format,a.quality)}.call(b,c));break;case "blob":(function(a){var b=this;return new Promise(function(c,d){Q.call(b,a).toBlob(function(a){c(a)},a.format,a.quality)})}).call(b,c).then(a);break;default:a(function(a){var b=a.points,c=document.createElement("div"),d=document.createElement("img"),e=b[2]-b[0],f=b[3]-
b[1];return q(c,"breakercrop-result"),c.appendChild(d),k(d,{left:-1*b[0]+"px",top:-1*b[1]+"px"}),d.src=a.url,k(c,{width:e+"px",height:f+"px"}),c}.call(b,c))}})}function w(a,b){if(-1<a.className.indexOf("breakercrop-container"))throw Error("Breakercrop: Can't initialize breakercrop more than once");if(this.element=a,this.options=z(z({},w.defaults),b),"img"===this.element.tagName.toLowerCase()){var c=this.element;q(c,"cr-original-image");U(c,{"aria-hidden":"true",alt:""});var d=document.createElement("div");
this.element.parentNode.appendChild(d);d.appendChild(c);this.element=d;this.options.url=this.options.url||c.src}if(ba.call(this),this.options.url)c={url:this.options.url,points:this.options.points},delete this.options.url,delete this.options.points,X.call(this,c)}"function"!=typeof Promise&&function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");
this._value=this._state=null;this._deferreds=[];k(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void q(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null!==c){try{var d=c(b._value)}catch(p){return void a.reject(p)}a.resolve(d)}else(b._state?a.resolve:a.reject)(b._value)})}function e(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==
typeof c)return void k(b(c,a),b(e,this),b(f,this))}this._state=!0;this._value=a;h.call(this)}catch(t){f.call(this,t)}}function f(a){this._state=!1;this._value=a;h.call(this)}function h(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function k(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(p){d||(d=!0,c(p))}}var r=setTimeout,q="function"==typeof setImmediate&&setImmediate||function(a){r(a,1)},w=Array.isArray||
function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.prototype["catch"]=function(a){return this.then(null,a)};c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new function(a,b,c,d){this.onFulfilled="function"==typeof a?a:null;this.onRejected="function"==typeof b?b:null;this.resolve=c;this.reject=d}(a,b,c,f))})};c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&w(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,
g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g;0==--e&&b(a)}catch(ca){c(ca)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})};c.resolve=function(a){return a&&"object"==typeof a&&a.constructor===c?a:new c(function(b){b(a)})};c.reject=function(a){return new c(function(b,c){c(a)})};c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})};
c._setImmediateFn=function(a){q=a};"undefined"!=typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);"function"!=typeof window.CustomEvent&&function(){function a(a,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var b=document.createEvent("CustomEvent");return b.initCustomEvent(a,c.bubbles,c.cancelable,c.detail),b}a.prototype=window.Event.prototype;window.CustomEvent=a}();HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(a,
b,c){c=atob(this.toDataURL(b,c).split(",")[1]);for(var d=c.length,e=new Uint8Array(d),f=0;f<d;f++)e[f]=c.charCodeAt(f);a(new Blob([e],{type:b||"image/png"}))}});var T=["Webkit","Moz","ms"],S=document.createElement("div").style,Z=[1,8,3,6],ia=[2,7,4,5];var r=y("transform");var F=y("transformOrigin");var C=y("userSelect");var ja={translate3d:{suffix:", 0px"},translate:{suffix:""}},h=function(a,b,c){this.x=parseFloat(a);this.y=parseFloat(b);this.scale=parseFloat(c)};h.parse=function(a){return a.style?
h.parse(a.style[r]):-1<a.indexOf("matrix")||-1<a.indexOf("none")?h.fromMatrix(a):h.fromString(a)};h.fromMatrix=function(a){var b=a.substring(7).split(",");return b.length&&"none"!==a||(b=[1,0,0,1,0,0]),new h(parseInt(b[4],10),parseInt(b[5],10),parseFloat(b[0]))};h.fromString=function(a){var b=a.split(") ");a=b[0].substring(w.globals.translate.length+1).split(",");b=1<b.length?b[1].substring(6):1;return new h(1<a.length?a[0]:0,1<a.length?a[1]:0,b)};h.prototype.toString=function(){return w.globals.translate+
"("+this.x+"px, "+this.y+"px"+(ja[w.globals.translate].suffix||"")+") scale("+this.scale+")"};var H=function(a){if(!a||!a.style[F])return this.x=0,void(this.y=0);a=a.style[F].split(" ");this.x=parseFloat(a[0]);this.y=parseFloat(a[1])};H.prototype.toString=function(){return this.x+"px "+this.y+"px"};var aa,R,da=(aa=G,function(){var a=this,b=arguments;clearTimeout(R);R=setTimeout(function(){R=null;aa.apply(a,b)},500)}),fa={type:"canvas",format:"png",quality:1},ha=["jpeg","webp","png"];if(window.jQuery){var B=
window.jQuery;B.fn.breakercrop=function(a){if("string"===typeof a){var b=Array.prototype.slice.call(arguments,1),c=B(this).data("breakercrop");return"get"===a?c.get():"result"===a?c.result.apply(c,b):"bind"===a?c.bind.apply(c,b):this.each(function(){var c=B(this).data("breakercrop");if(c){var e=c[a];if(!B.isFunction(e))throw"Breakercrop "+a+" method not found";e.apply(c,b);"destroy"===a&&B(this).removeData("breakercrop")}})}return this.each(function(){var b=new w(this,a);b.$=B;B(this).data("breakercrop",
b)})}}w.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:!0,leftClass:"",rightClass:""},resizeControls:{width:!0,height:!0},customClass:"",showZoomer:!0,enableZoom:!0,enableResize:!1,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,enableKeyMovement:!0,update:function(){}};w.globals={translate:"translate3d"};z(w.prototype,{bind:function(a,b){return X.call(this,a,b)},get:function(){var a=Y.call(this),b=a.points;return this.options.relative&&
(b[0]/=this.elements.img.naturalWidth/100,b[1]/=this.elements.img.naturalHeight/100,b[2]/=this.elements.img.naturalWidth/100,b[3]/=this.elements.img.naturalHeight/100),a},result:function(a){return ea.call(this,a)},refresh:function(){P.call(this)},setZoom:function(a){D.call(this,a);L(this.elements.zoomer)},rotate:function(a){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Breakercrop: Cannot rotate without enableOrientation && EXIF.js included";var b,c,d,e,f=this.elements.canvas;
this.data.orientation=(b=this.data.orientation,c=-1<Z.indexOf(b)?Z:ia,d=c.indexOf(b),e=a/90%c.length,c[(c.length+d+e%c.length)%c.length]);N(f,this.elements.img,this.data.orientation);O.call(this);W.call(this);copy=null},destroy:function(){this.element.removeChild(this.elements.boundary);var a=this.element;a.classList?a.classList.remove("breakercrop-container"):a.className=a.className.replace("breakercrop-container","");this.options.enableZoom&&this.element.removeChild(this.elements.zoomerWrap);delete this.elements}});
K.Breakercrop=window.Breakercrop=w});